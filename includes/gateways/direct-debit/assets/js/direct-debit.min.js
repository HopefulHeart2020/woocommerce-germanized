jQuery(function(o){var r={$checkoutForm:o("form.checkout, form#order_review"),params:{},init:function(){this.params=direct_debit_params,this.$checkoutForm.on("blur input change","#direct-debit-form input#direct-debit-account-holder",this.onValidateHolder),this.$checkoutForm.on("blur input change","#direct-debit-form input#direct-debit-account-iban",this.onValidateIBAN),this.$checkoutForm.on("blur input change","#direct-debit-form input#direct-debit-account-bic",this.onValidateSWIFT),this.$checkoutForm.on("blur input change","input, select",this.maybeShowCheckbox),o("body").bind("updated_checkout",this.maybeShowCheckbox),o(document).on("click","a#show-direct-debit-trigger",this.onPrettyPhotoOpen),this.initPrettyPhoto()},onValidateIBAN:function(){r.isValidIBAN(o(this).val())||(o(this).parents("p.form-row").removeClass("woocommerce-validated"),o(this).parents("p.form-row").addClass("woocommerce-invalid woocommerce-invalid-required-field"))},onValidateSWIFT:function(){r.isValidSWIFT(o(this).val())||(o(this).parents("p.form-row").removeClass("woocommerce-validated"),o(this).parents("p.form-row").addClass("woocommerce-invalid woocommerce-invalid-required-field"))},onValidateHolder:function(){o(this).val()||(o(this).parents("p.form-row").removeClass("woocommerce-validated"),o(this).parents("p.form-row").addClass("woocommerce-invalid woocommerce-invalid-required-field"))},isValidIBAN:function(t){return IBAN.isValid(t)},isValidSWIFT:function(t){return/^([a-zA-Z]){4}([a-zA-Z]){2}([0-9a-zA-Z]){2}([0-9a-zA-Z]{3})?$/.test(t)},maybeShowCheckbox:function(){var t=r;o(".direct-debit-checkbox").hide(),o("#direct-debit-form").length&&o("#payment_method_direct-debit").is(":checked")&&o("input#direct-debit-account-holder").val()&&o("input#direct-debit-account-iban").val()&&o("input#direct-debit-account-bic").val()&&(o(".direct-debit-checkbox").show(),t.initPrettyPhoto())},onPrettyPhotoOpen:function(t){var e=r;t.preventDefault();var t=o(this).attr("href"),i={};o.each(e.params.mandate_fields,function(t,e){0<o("input"+e+", select"+e).length?i[t]=o("input"+e+", select"+e).val():i[t]=""}),t+="&ajax=true&"+jQuery.param(i),o("#show-direct-debit-pretty").attr("href",t),o("#show-direct-debit-pretty").trigger("click")},initPrettyPhoto:function(){o("a#show-direct-debit-pretty").prettyPhoto({social_tools:!1,theme:"pp_woocommerce",horizontal_padding:20,opacity:.8,deeplinking:!1})}};r.init()});