window.germanized=window.germanized||{},function(o,s){s.single_product={params:{},requests:[],productId:0,variationId:0,init:function(){var i=s.single_product;i.params=wc_gzd_single_product_params,i.productId=i.params.product_id,accounting.settings={currency:{decimal:i.params.price_decimal_sep,thousand:i.params.price_thousand_sep},number:{decimal:i.params.price_decimal_sep,thousand:i.params.price_thousand_sep}},o(i.params.wrapper+" "+i.params.price_selector+":not(.price-unit):visible").bind("DOMSubtreeModified",i.onChangePrice),0<o(".variations_form").length&&o(".variations_form").each(function(){var r=o(this);r.on("reset_data",i.onResetVariation),r.on("found_variation.wc-variation-form",i.onFoundVariation)})},onFoundVariation:function(r,i){var e=s.single_product;i.hasOwnProperty("variation_id")&&(e.variationId=i.variation_id)},onResetVariation:function(){s.single_product.variationId=0},onChangePrice:function(t){setTimeout(function(){var r=s.single_product,i=o(r.params.wrapper+" "+r.params.price_selector+":not(.price-unit):visible");t.preventDefault(),o(r.params.wrapper+" "+r.params.price_selector+":not(.price-unit):visible").unbind("DOMSubtreeModified",r.onChangePrice);var e=i.parents(r.params.wrapper).find(".price-unit:first"),n=accounting.unformat(i.find(".amount:first").text()),a="";1<i.find(".amount").length&&(a=accounting.unformat(i.find(".amount:last").text())),0<e.length&&n&&r.refreshUnitPrice(n,e,a),o(r.params.wrapper+" "+r.params.price_selector+":not(.price-unit):visible").bind("DOMSubtreeModified",r.onChangePrice)},500)},refreshUnitPrice:function(r,i,e){var n=s.single_product;if(0<n.requests.length)for(var a=0;a<n.requests.length;a++)n.requests[a].abort();n.requests.push(o.ajax({type:"POST",url:n.params.wc_ajax_url.toString().replace("%%endpoint%%","gzd_refresh_unit_price"),data:{security:n.params.refresh_unit_price_nonce,product_id:0<n.variationId?n.variationId:n.productId,price:r,price_sale:e},success:function(r){r.hasOwnProperty("unit_price_html")&&i.html(r.unit_price_html)},error:function(r){},dataType:"json"}))}},o(document).ready(function(){s.single_product.init()})}(jQuery,window.germanized);