window.trusted_shops=window.trusted_shops||{},function(a,b,c){c.admin={params:{},optionPrefix:"",init:function(){this.params=trusted_shops_params,this.optionPrefix=this.params.option_prefix;var b=this;a(document).on("change","#woocommerce_"+this.optionPrefix+"trusted_shops_integration_mode",this.onChangeIntegrationMode),a(document).on("change",":input[id$=_enable]",this.onChangeEnable),a(document).on("change","#woocommerce_"+this.optionPrefix+"trusted_shops_reviews_enable",this.onChangeEnableReviews),a(document).find("#woocommerce_"+this.optionPrefix+"trusted_shops_integration_mode").trigger("change"),a(document).find(":input[id$=_enable]").trigger("change"),a(document).on("click","#wc-gzd-trusted-shops-export",this.onClickExport),a(document).on("click","table.form-table tr",this.onSidebarChange),a(":data(sidebar)").each(function(){a(this).parents("tr").on("click",b.onSidebarChange)}),a(document).on("click",'h2, div[id$="options-description"]',this.onSidebarTitelChange),a(document).on("submit","#mainform",this.onSaveForm)},onChangeEnableReviews:function(){var b=c.admin;a(this).is(":checked")?(a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_sticker_enable").parents("tr").show(),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_widget_enable").parents("tr").show(),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_brand_attribute").parents("tr").show()):(a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_sticker_enable").prop("checked",!1),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_widget_enable").prop("checked",!1),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_sticker_enable").parents("tr").hide(),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_widget_enable").parents("tr").hide(),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_brand_attribute").parents("tr").hide()),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_sticker_enable").trigger("change"),a(document).find("#woocommerce_"+b.optionPrefix+"trusted_shops_product_widget_enable").trigger("change")},onChangeIntegrationMode:function(){c.admin;a(document).find(":input[id$=_enable]").trigger("change")},onChangeEnable:function(){self=c.admin,self.showHideGroupElements(a(this))},showHideGroupElements:function(b){var d=b.attr("id"),e=c.admin,f=d.replace("woocommerce_"+e.optionPrefix+"trusted_shops_",""),g=f.substr(0,f.length-7),h=a(":input[id^=woocommerce_"+e.optionPrefix+"trusted_shops_"+g+"_], th[id^=woocommerce_"+e.optionPrefix+"trusted_shops_"+g+"_]"),i=!1,j=["woocommerce_"+e.optionPrefix+"trusted_shops_rich_snippets_category","woocommerce_"+e.optionPrefix+"trusted_shops_rich_snippets_product","woocommerce_"+e.optionPrefix+"trusted_shops_rich_snippets_home"];b.is(":checked")&&(i=!0),h.each(function(){var b=a(this).attr("id"),c=i;if("woocommerce_"+e.optionPrefix+"trusted_shops_"+g+"_enable"!==b){if("woocommerce_"+e.optionPrefix+"trusted_shops_"+g+"_code"===b||"woocommerce_"+e.optionPrefix+"trusted_shops_"+g+"_selector"===b)!e.isExpertMode()&&c&&(c=!1);else if(e.isExpertMode()){var d=a(this).parents("table.form-table");d.find(":input[id$=_code]").length>0&&-1==a.inArray(b,j)&&(c=!1)}c?a(this).parents("tr").show():a(this).parents("tr").hide()}})},onSidebarTitelChange:function(){var b=a(this).nextAll("table.form-table:first");b.find("tr:first").trigger("click"),$sidebar=a(".wc-ts-sidebar-active"),$sidebar.offset({top:a(this).offset().top})},onSidebarChange:function(){var b=a(this).find("[data-sidebar]"),c=a(this).parents(".form-table"),d=a(".wc-ts-sidebar-active"),e=d;b.length<=0&&c.find("[data-sidebar]").length>0&&(b=c.find("[data-sidebar]:first")),e=a(b.length<=0?"#wc-ts-sidebar-default":"#"+b.data("sidebar")),d.removeClass("wc-ts-sidebar-active"),e.addClass("wc-ts-sidebar-active"),e.offset({top:a(this).offset().top})},getSettingsWrapper:function(){var b=c.admin,d=b.optionPrefix.replace("_","-");return a(".wc-"+d+"admin-settings")},addNotice:function(b,d){var e=c.admin;e.getSettingsWrapper().find("#message").remove(),e.getSettingsWrapper().prepend('<div id="message" class="notice '+b+' inline"><p>'+d.join("<br/>")+"</p></div>"),a("html, body").animate({scrollTop:e.getSettingsWrapper().offset().top-100},1e3)},validate:function(a){var b=c.admin,d=!0,e=a.attr("id"),f="_code"===e.substr(e.length-5),g=a.val();if(a.data("validate")){var h=a.data("validate");"integer"===h&&(g=parseInt(g),isNaN(g)&&(d=!1))}else b.isExpertMode()&&f&&""===g&&(d=!1);return d},onSaveForm:function(){var b=c.admin,d=!0;return a("textarea, input, select").removeClass("wc-ts-has-error"),a("textarea:visible, input:visible, select:visible").each(function(){var c=a(this).attr("id"),e="_code"===c.substr(c.length-5),f=a(this).parents("tr").find("td");if(f.find(".wc-ts-error").remove(),!b.validate(a(this))){if(a(this).addClass("wc-ts-has-error"),e)var g=b.params.i18n_error_mandatory;else var g=a(this).data("validate-msg");f.append('<span class="wc-ts-error">'+g+"</span>"),d=!1}}),d||a("html, body").animate({scrollTop:b.getSettingsWrapper().find(".wc-ts-has-error:first").offset().top-100},1e3),d},isExpertMode:function(){c.admin;return"expert"===a("#woocommerce_"+this.optionPrefix+"trusted_shops_integration_mode").val()},onClickExport:function(){var b=c.admin,d=a(this).data("href-org");a(this).attr("href",d+"&interval="+a("#woocommerce_"+b.optionPrefix+"trusted_shops_review_collector").val()+"&days="+a("#woocommerce_"+b.params.option_prefix+"trusted_shops_review_collector_days_to_send").val())}},a(document).ready(function(){c.admin.init()})}(jQuery,wp,window.trusted_shops);