window.germanized=window.germanized||{},function(u,s){s.settings={params:{},init:function(){var e=this;this.params=wc_gzd_admin_settings_params;try{u(document.body).on("wc-enhanced-select-init wc-gzd-enhanced-select-init",this.onEnhancedSelectInit).trigger("wc-gzd-enhanced-select-init")}catch(e){window.console.log(e)}u(document).on("change","input[name=woocommerce_gzd_dispute_resolution_type]",this.onChangeDisputeResolutionType).on("click","a.woocommerce-gzd-input-toggle-trigger",this.onInputToogleClick).on("change",".wc-gzd-setting-tabs input.woocommerce-gzd-tab-status-checkbox",this.onChangeTabStatus).on("change gzd_show_or_hide_fields",".wc-gzd-admin-settings :input",this.onChangeInput).on("change",".wc-gzd-setting-tab-enabled :input",this.preventWarning).on("click","a.wc-gzd-install-extension-btn",this.onInstallExtension),u(document.body).on("woocommerce_gzd_setting_field_visible",this.onShowField).on("woocommerce_gzd_setting_field_invisible",this.onHideField),u(".wc-gzd-admin-settings :input").trigger("gzd_show_or_hide_fields"),u("input[name=woocommerce_gzd_dispute_resolution_type]:checked").trigger("change"),this.initMailSortable(),u(document.body).on("init_tooltips",function(){e.initTipTips()}),e.initTipTip()},preventWarning:function(){window.onbeforeunload=""},initTipTip:function(){u(".wc-gzd-setting-tab-actions a.button").tipTip({fadeIn:50,fadeOut:50,delay:200})},onInstallExtension:function(){var e=s.settings,i=u(this),t={action:"woocommerce_gzd_install_extension",security:e.params.install_extension_nonce,extension:i.data("extension")};return i.addClass("wc-gzd-is-loading"),i.append('<span class="spinner is-active"></span>'),u.ajax({url:e.params.ajax_url,data:t,dataType:"json",type:"POST",success:function(e){var t;i.find(".spinner").remove(),i.removeClass("wc-gzd-is-loading"),e.success?i.is("[href]")&&"#"!==i.attr("href")&&(window.location.href=i.attr("href")):e.hasOwnProperty("message")&&(t=u("#wpbody-content").find(".wrap"),(t=0<u(".wc-gzd-setting-tabs").length?u(".wc-gzd-setting-tabs"):t).before('<div class="error inline" id="message"><p>'+e.message+"</p></div>"),u("html, body").animate({scrollTop:u("#message").offset().top-32},1e3))}}),!1},onChangeTabStatus:function(){var e=u(this),t=s.settings,i=e.data("tab"),n=e.parents("td").find(".woocommerce-gzd-input-toggle"),o=n.parents("a"),e=e.is(":checked")?"yes":"no",i={action:"woocommerce_gzd_toggle_tab_enabled",security:t.params.tab_toggle_nonce,enable:e,tab:i};return n.addClass("woocommerce-input-toggle--loading"),u.ajax({url:t.params.ajax_url,data:i,dataType:"json",type:"POST",success:function(e){!0===e.data?(n.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),n.addClass("woocommerce-input-toggle--enabled"),n.removeClass("woocommerce-input-toggle--loading"),e.hasOwnProperty("message")&&0<e.message.length&&(u(".wc-gzd-setting-tabs").before('<div class="error inline" id="message"><p>'+e.message+"</p></div>"),u("html, body").animate({scrollTop:u("#message").offset().top-32},1e3))):!1===e.data?(n.removeClass("woocommerce-input-toggle--enabled, woocommerce-input-toggle--disabled"),n.addClass("woocommerce-input-toggle--disabled"),n.removeClass("woocommerce-input-toggle--loading")):"needs_setup"===e.data&&(window.location.href=o.attr("href"))}}),!1},onShowField:function(e,t,i,n){t.parents("table").find(":input[data-show_if_"+i+"]").each(function(){u(this).trigger("gzd_show_or_hide_fields")})},onHideField:function(e,t,i,n){t.parents("table").find(":input[data-show_if_"+i+"]").each(function(){u(this).trigger("gzd_show_or_hide_fields")})},onChangeInput:function(){var p=s.settings;u(this).parents("tr").find(":input:not(.select2-focusser, .select2-input)").each(function(){var e=u(this),g=!1,t=u(this).attr("name");if((e.is(":checked")||e.is(":selected"))&&(g=!0,e.parents("tr").is(":visible")||(g=!1)),void 0!==t&&!1!==t){var m=t.replace(/[\[\]']+/g,""),h=e.val(),t=u(".wc-gzd-admin-settings").find(":input[data-show_if_"+m+"]");if(e.is(":radio")){if(!e.is(":checked"))return}else e.is(":checkbox")&&(h=e.is(":checked")?"yes":"no",e.parents("tr").is(":visible")||(h="no"));t.each(function(){var e,t,i,n=u(this).data("show_if_"+m),o=u(this).data(),s=u(this).val(),a=u(this).attr("name").replace(/[\[\]']+/g,""),c=u(this).parents("tr"),r=!1,d=c.hasClass("wc-gzd-setting-visible"),l=[];for(e in o)o.hasOwnProperty(e)&&"show_if_"===e.substring(0,8)&&(t=e.replace("show_if_",""),l[p.getInputByIdOrName(t).index(":input")]=t);1<(l=l.filter(function(){return!0})).length&&(d||(i=l.slice(-1)[0],d=p.getInputByIdOrName(i),m!==i?(r=!0,d.parents("tr").is(":visible")&&d.trigger("gzd_show_or_hide_fields")):d.parents("tr").is(":visible")||(c.addClass("wc-gzd-setting-invisible"),u(document.body).trigger("woocommerce_gzd_setting_field_invisible",[c,a,s]),r=!0))),r||(c.removeClass("wc-gzd-setting-visible wc-gzd-setting-invisible"),void 0!==n&&0<n.length?h===n?(c.addClass("wc-gzd-setting-visible"),u(document.body).trigger("woocommerce_gzd_setting_field_visible",[c,a,s])):(c.addClass("wc-gzd-setting-invisible"),u(document.body).trigger("woocommerce_gzd_setting_field_invisible",[c,a,s])):g?(c.addClass("wc-gzd-setting-visible"),u(document.body).trigger("woocommerce_gzd_setting_field_visible",[c,a,s])):(c.addClass("wc-gzd-setting-invisible"),u(document.body).trigger("woocommerce_gzd_setting_field_invisible",[c,a,s])))});var t=u(this).parents(".form-table"),i=!1;t.find("tr").each(function(){if(!u(this).hasClass("wc-gzd-setting-invisible"))return!(i=!0)}),i?t.show():t.hide()}})},getInputByIdOrName:function(e){var t=u(".wc-gzd-admin-settings").find(":input#"+e);return t=t.length<=0?u(".wc-gzd-admin-settings").find(':input[name="'+e+'"]'):t},onEnhancedSelectInit:function(){var i=s.settings;u(":input.wc-gzd-enhanced-tags").filter(":not(.enhanced)").each(function(){var e={minimumResultsForSearch:10,allowClear:!!u(this).data("allow_clear"),placeholder:u(this).data("placeholder"),tags:!0};u(this).selectWoo(e).addClass("enhanced")}),u(":input.gzd-select-term").filter(":not(.enhanced)").each(function(){var t,e={allowClear:!!u(this).data("allow_clear"),placeholder:u(this).data("placeholder"),minimumInputLength:u(this).data("minimum_input_length")?u(this).data("minimum_input_length"):"3",escapeMarkup:function(e){return e},ajax:{url:i.params.ajax_url,dataType:"json",delay:250,data:function(e){return{term:e.term,action:u(this).data("action")||"woocommerce_json_search_taxonomy_terms",security:i.params.search_term_nonce,exclude:u(this).data("exclude"),taxonomy:u(this).data("taxonomy"),limit:u(this).data("limit")}},processResults:function(e){var i=[];return e&&!e.error&&u.each(e,function(e,t){i.push({id:t.term_id,text:t.name})}),{results:i}},cache:!0}};e=e,u(t=this).selectWoo(e).addClass("enhanced"),u(t).prop("multiple")&&u(t).on("change",function(){var e=u(t).children();e.sort(function(e,t){e=e.text.toLowerCase(),t=t.text.toLowerCase();return t<e?1:e<t?-1:0}),u(t).html(e)})})},onParcelDeliveryShowSpecial:function(){"shipping_methods"===u(this).val()?u("select#woocommerce_gzd_checkboxes_parcel_delivery_show_shipping_methods").parents("tr").show():u("select#woocommerce_gzd_checkboxes_parcel_delivery_show_shipping_methods").parents("tr").hide()},onChangeDisputeResolutionType:function(){var e=u(this).val();u("#woocommerce_gzd_alternative_complaints_text_"+e);u("[id^=woocommerce_gzd_alternative_complaints_text_]").parents("tr").hide(),u("#woocommerce_gzd_alternative_complaints_text_"+e).parents("tr").show()},onInputToogleClick:function(){var e=u(this).find("span.woocommerce-gzd-input-toggle"),t=e.parents("fieldset").find("input[type=checkbox]"),i=e.hasClass("woocommerce-input-toggle--enabled");return e.removeClass("woocommerce-input-toggle--enabled"),e.removeClass("woocommerce-input-toggle--disabled"),i?(t.prop("checked",!1),e.addClass("woocommerce-input-toggle--disabled")):(t.prop("checked",!0),e.addClass("woocommerce-input-toggle--enabled")),t.trigger("change"),!1},initMailSortable:function(){var n;0<u("#woocommerce_gzd_mail_attach_imprint").length&&(n=u("#woocommerce_gzd_mail_attach_imprint").parents("table"),u(n).find("tbody").sortable({items:"tr",cursor:"move",axis:"y",handle:"td, th",scrollSensitivity:40,helper:function(e,t){return t.children().each(function(){jQuery(this).width(jQuery(this).width())}),t.css("left","0"),t},start:function(e,t){t.item.css("background-color","#f6f6f6")},stop:function(e,t){t.item.removeAttr("style");var i=[];u(n).find("tr select").each(function(){i.push(u(this).attr("id").replace("woocommerce_gzd_mail_attach_",""))}),u("#woocommerce_gzd_mail_attach_order").val(i.join())}}))}},u(document).ready(function(){s.settings.init()})}(jQuery,window.germanized);